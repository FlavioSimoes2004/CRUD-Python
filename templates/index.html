<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Biblioteca</title>
        <style>
            nav ul {
                list-style: none;
                padding: 0;
            }

            nav ul li {
                display: inline;
                /*background-color: blueviolet;*/
                color: yellow;
                margin-right: 20px;
            }

            #nav {
                width: 300px;
                background-color: rgb(0, 157, 255);
                margin: 0 auto;
                text-align: center;
            }

            #container_livros {
                width: 50%;
                background-color: brown;
                margin: 0 auto;
                /*text-align: center;*/
            }

            #container_livros div{
                display: inline-block;
                width: 25%;
                padding: 0;
                margin-right: 20px;
                background-color: green;
            }
        </style>
    </head>

    <body>
        <div id="nav">
            <nav>
                <ul>
                    <li><strong>HOME</strong></li>
                    <li><strong>PERFIL</strong></li>
                    <li><strong>LOGIN</strong></li>
                </ul>
            </nav>
        </div>

        <div id="container_livros">
            <div>

            </div>
        </div>
    </body>

    <footer></footer>
</html>

<script>
    console.log('hello world')

    const containerLivro = document.getElementById('container_livros');

    class Livro{
        constructor(nome, genero, autor, descricao, data_publicacao, quantidade) {
            this.nome = nome;
            this.genero = genero;
            this.autor = autor;
            this.descricao = descricao;
            this.data_publicacao = data_publicacao;
            this.quantidade = quantidade;

            this.render();
        }

        render() {
            this.criarLivro();
            containerLivro.append(this.div);
            console.log('criado livro')
        }

        criarLivro() {
            this.div = document.createElement('div');
            this.txt = document.createElement('pre')

            this.txt.innerText = this.nome + '\n'
            + this.genero + '\n' + this.autor;

            this.div.append(this.txt);
        }
    }

    function getLivros() {
        fetch('/livros', {
            method: 'GET',
            headers:{
                'Content-Type': 'application/json',
            }
        })
        .then(response => {
            if(!response.ok)
            {
                alert('ERROR: /livros')
                throw new error('ERROR: /livros')
            }

            return response.json()
        })
        .then(livros => {
            for(let i = 0; i < livros.length; i++)
            {
                new Livro(livros[i][1], livros[i][2], livros[i][3], livros[0][4], livros[0][5], livros[0][6]);
            }
        })
        .catch(error => {
            console.error('ERROR: /livros', error);
        })
    }

    //getLivros();
    //new Livro('a', 'a', 'a', 'a', 'a', 'a');
</script>